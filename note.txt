Project:movie-website

PRD - MVP{design + architecture}







[Footprint]
install dependencies
mongoDB






[Questions]




[Technical debts]
form.form-horizontal(method="post", action="/admin/movie/new", enctype="multipart/form-data")
css files -> 更多样式的书写，项目的扩展



注意coding过程中对框架的把握以及对细节的精致

Best Practice









- 2017.07.08
1.package.json  (npm init)
2. 
	npm install express jade mongoose moment
	bower -g/bootstrap

urls for test:
http://localhost:3000/
http://localhost:3000/admin/list




[豆瓣IDList]
26920269




[code archive]

//index page
app.get('/', function(req, res) {
	res.render('index', {
		title:'JKMushi电影首页',
		movies: [{
			title: '摔跤吧,爸爸（阿米尔·汗）',
			_id: 1,
			poster: 'https://img3.doubanio.com/lpic/s29289502.jpg'
		},{
			title: '摔跤吧,爸爸（阿米尔·汗）',
			_id: 1,
			poster: 'https://img3.doubanio.com/lpic/s29289502.jpg'
		},{
			title: '摔跤吧,爸爸（阿米尔·汗）',
			_id: 1,
			poster: 'https://img3.doubanio.com/lpic/s29289502.jpg'
		},{
			title: '摔跤吧,爸爸（阿米尔·汗）',
			_id: 1,
			poster: 'https://img3.doubanio.com/lpic/s29289502.jpg'
		}]

	})
})


// detail page
app.get('/detail', function(req, res) {
	res.render('detail', {
		title:'JKMushi详情页',
		movie:{
			director: '提·蒂瓦里',
			country: 'India',
			title: '摔跤吧,爸爸（阿米尔·汗）',
			year: '2017',
			poster: 'https://img3.doubanio.com/lpic/s29289502.jpg',
			language: '印地语',
			flash: 'http://player.youku.com/player.php/sid/XNjA1Njc0NTUy/v.swf',
			summary: '马哈维亚（阿米尔·汗 Aamir Khan 饰）曾经是一名前途无量的摔跤运动员，在放弃了职业生涯后，他最大的遗憾就是没有能够替国家赢得金牌。马哈维亚将这份希望寄托在了尚未出生的儿子身上，哪知道妻子接连给他生了两个女儿，取名吉塔（法缇玛·萨那·纱卡 Fatima Sana Shaikh 饰）和巴比塔（桑亚·玛荷塔 Sanya Malhotra 饰）。让马哈维亚没有想到的是，两个姑娘展现出了杰出的摔跤天赋，让他幡然醒悟，就算是女孩，也能够昂首挺胸的站在比赛场上，为了国家和她们自己赢得荣誉...'
		}
	})
})

// list page
 app.get('/list', function(req, res) {
 	res.render('list', {
 		title:'JKMushi列表页',
 		movies:[{
 			director: '提·蒂瓦里',
 			country: 'India',
 			title: '摔跤吧,爸爸（阿米尔·汗）',
 			year: '2017',
 			poster: 'https://img3.doubanio.com/lpic/s29289502.jpg',
 			language: '印地语',
 			flash: 'http://player.youku.com/player.php/sid/XNjA1Njc0NTUy/v.swf',
 			summary: '马哈维亚（阿米尔·汗 Aamir Khan 饰）曾经是一名前途无量的摔跤运动员，在放弃了职业生涯后，他最大的遗憾就是没有能够替国家赢得金牌。马哈维亚将这份希望寄托在了尚未出生的儿子身上，哪知道妻子接连给他生了两个女儿，取名吉塔（法缇玛·萨那·纱卡 Fatima Sana Shaikh 饰）和巴比塔（桑亚·玛荷塔 Sanya Malhotra 饰）。让马哈维亚没有想到的是，两个姑娘展现出了杰出的摔跤天赋，让他幡然醒悟，就算是女孩，也能够昂首挺胸的站在比赛场上，为了国家和她们自己赢得荣誉...'
 		}]
 	})
 })




//- this is comments
extends ../layout

block content
  .container
    .row
      form.form-horizontal(method="post", action="/admin/movie/new", enctype="multipart/form-data")
        .form-group
          label.col-sm-2.control-label 豆瓣同步
          .col-sm-10
            input#douban.form-control(type="text")
        if movie._id
          input(type="hidden", name="_id", value=movie._id)
        .form-group
          label.col-sm-2.control-label(for="inputCategory") 电影分类
          .col-sm-10
            input#inputCategory.form-control(type="text", name="categoryName", value=movie.categoryName)
        .form-group
          label.col-sm-2.control-label(for="inputTitle") 电影名字
          .col-sm-10
            input#inputTitle.form-control(type="text", name="title", value=movie.title)
        .form-group
          label.col-sm-2.control-label(for="inputDirector") 电影导演
          .col-sm-10
            input#inputDirector.form-control(type="text", name="director", value=movie.director)
        .form-group
          label.col-sm-2.control-label(for="inputCountry") 国家
          .col-sm-10
            input#inputCountry.form-control(type="text", name="country", value=movie.country)
        .form-group
          label.col-sm-2.control-label(for="inputLanguage") 语种
          .col-sm-10
            input#inputLanguage.form-control(type="text", name="language", value=movie.language)
        .form-group
          label.col-sm-2.control-label(for="inputPoster") 海报地址
          .col-sm-10
            input#inputPoster.form-control(type="text", name="poster", value=movie.poster)
        .form-group
          label.col-sm-2.control-label(for="uploadPoster") 海报上传
          .col-sm-10
            input#uploadPoster(type="file", name="uploadPoster")
        .form-group
          label.col-sm-2.control-label(for="inputFlash") 片源地址
          .col-sm-10
            input#inputFlash.form-control(type="text", name="flash", value=movie.flash)
        .form-group
          label.col-sm-2.control-label(for="inputYear") 上映年代
          .col-sm-10
            input#inputYear.form-control(type="text", name="year", value=movie.year)
        .form-group
          label.col-sm-2.control-label(for="inputSummary") 电影简介
          .col-sm-10
            textarea#inputSummary.form-control(type="text", name="summary")= movie.summary
        .form-group
          .col-sm-offset-2.col-sm-10
            button.btn.btn-default(type="submit") 录入
  script.
    $(function() {
      $('#douban').blur(function() {
        var douban = $(this)
        var id = douban.val()

        if (id) {
          $.ajax({
            url: 'https://api.douban.com/v2/movie/subject/' + id,
            cache: true,
            type: 'get',
            dataType: 'jsonp',
            crossDomain: true,
            jsonp: 'callback',
            success: function(data) {
              $('#inputTitle').val(data.title)
              $('#inputDirector').val(data.directors[0].name)
              $('#inputCountry').val(data.countries[0])
              $('#inputPoster').val(data.images.large)
              $('#inputYear').val(data.year)
              $('#inputSummary').val(data.summary)
            }
          })
        }
      })
    })